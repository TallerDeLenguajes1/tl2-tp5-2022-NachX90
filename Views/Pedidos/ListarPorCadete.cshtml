@{
    @model CadeteriaMVC.ViewModels.Pedidos.ListarPorCadeteVM;
    @inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccesor
    var SesionIdRol = @HttpContextAccesor.HttpContext.Session.GetInt32("IdRol");
    
    ViewData["Title"] = "Listado de pedidos por cadete";
    
    if (TempData["Error"] != null)
    {
        <script type="text/javascript">
            alert('@TempData["Error"]')
        </script>
    }
}

            <h1 class="text-info">@ViewData["Title"]: @Model.NombreCadete</h1>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">@Html.DisplayNameFor(Model => Model.ListaDePedidosVM.First().Id)</th>
                        <th scope="col">@Html.DisplayNameFor(Model => Model.ListaDePedidosVM.First().Descripcion)</th>
                        <th scope="col">@Html.DisplayNameFor(Model => Model.ListaDePedidosVM.First().Cliente)</th>
                        <th scope="col">@Html.DisplayNameFor(Model => Model.ListaDePedidosVM.First().Cadete)</th>
                        <th scope="col">@Html.DisplayNameFor(Model => Model.ListaDePedidosVM.First().Estado)</th>
                        <th scope="col">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var Pedido in Model.ListaDePedidosVM)
                    {
                    <tr>
                        <th scope="row" class="align-middle">@Pedido.Id</th>
                        <td class="align-middle">@Pedido.Descripcion</td>
                        <td class="align-middle">@Pedido.Cliente</td>
                        <td class="align-middle">@Pedido.Cadete</td>
                        <td class="align-middle">@Pedido.Estado</td>
                        <td class="align-middle">
                        @if (SesionIdRol == 1 || SesionIdRol == 2) // es admin o vendedor
                        {
                            <a class="btn btn-outline-info bg-gradient btn-sm my-1" asp-controller="Pedidos" asp-action="EditarPedido" asp-route-id="@Pedido.Id">
                                <svg class="bi" width="18" height="18" fill="currentColor">
                                  <use xlink:href="../../bootstrap-icons/bootstrap-icons.svg#pencil-fill"/>
                                </svg>
                                Editar
                            </a>
                            <a class="btn btn-outline-danger bg-gradient btn-sm my-1" asp-controller="Pedidos" asp-action="EliminarPedido" asp-route-id="@Pedido.Id" onclick="    return confirm('¿Eliminar definitivamente? ¡Esta acción no se puede deshacer!');">
                                <svg class="bi" width="18" height="18" fill="currentColor">
                                  <use xlink:href="../../bootstrap-icons/bootstrap-icons.svg#trash-fill"/>
                                </svg>
                                Eliminar
                            </a>
                        }
                        @if (SesionIdRol == 3) // es cadete
                        {
                            <a class="btn btn-outline-info bg-gradient btn-sm my-1" asp-controller="Pedidos" asp-action="CambiarEstadoPedido" asp-route-id="@Pedido.Id">
                                <svg class="bi" width="18" height="18" fill="currentColor">
                                  <use xlink:href="../../bootstrap-icons/bootstrap-icons.svg#pencil-fill"/>
                                </svg>
                                Cambiar Estado
                            </a>
                        }
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
            